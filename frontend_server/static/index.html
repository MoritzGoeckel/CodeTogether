<html>
  <head>
    <title>Test</title>
    <link rel="stylesheet" href="code_styles/github.min.css">
  </head>
  <body>

    <div style="margin-top: 1em;">Room:
      <input type="text" value="_" id="room_id">
      <button id="join_btn">Join</button>
    </div>

    <code id="editor" class="hljs" style="display: block; width: 50%; height: 30em; font-family: 'Source Code Pro', monospace; margin-top: 1em;"></code>

    <div style="margin-top: 1em;">Language:
      <select id="lang_options">
        <option value="js">js</option>
        <option value="py">py</option>
        <option value="cpp">cpp</option>
      </select>

      <button id="run_btn">Run</button>
    </div>

    <div id="run_result" style="margin-top: 1em;"></div>

    <script src="/highlight.min.js"></script>
    <!-- <script src="//unpkg.com/@mui/material@latest/umd/material-ui.production.min.js"></script> -->
    <script type="module">
        import {CodeJar} from '/codejar.js'
        import {withLineNumbers} from '/linenumbers.js';
        import {connect} from '/client.js';

        const highlight = editor => {
            const code = editor.textContent
            const result = hljs.highlightAuto(code) 
            //const result = hljs.highlightAuto(code, {language: "js", ignoreIllegals: true}) 
            editor.innerHTML = result.value
        }
            
        console.log(highlight)

        var jar = CodeJar(document.querySelector('#editor'), withLineNumbers(highlight))
        jar.updateCode('let foo = bar');

        connect(jar)
    </script>
  </body>
</html>